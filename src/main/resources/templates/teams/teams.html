<!DOCTYPE html>
<html lang="ko">
<head>
    <th:block th:replace="~{fragments/head :: headFragment}"></th:block>
    <link rel="stylesheet" th:href="@{/css/teams/teams.css}">
</head>
<body>
    <div class="container">
        <div class="page-title">
            <h1>팀 관리</h1>
        </div>

        <!-- 서브 탭 네비게이션 -->
        <div class="sub-tabs">
            <a href="/stats/records" class="sub-tab active" id="records-tab">
                <i class="fas fa-chart-bar"></i> 기록
            </a>
            <a href="/stats/players" class="sub-tab" id="players-tab">
                <i class="fas fa-user-friends"></i> 선수
            </a>
        </div>

        <!-- 컨텐츠 영역 -->
        <div class="tab-content">
            <!-- 기록 탭 컨텐츠 -->
            <div id="records-content" class="content-section active">
                <div class="date-filter">
                    <div class="filter-tabs">
                        <button class="filter-tab-btn active" data-filter-type="relative">상대 기간</button>
                        <button class="filter-tab-btn" data-filter-type="absolute">절대 기간</button>
                    </div>
                    
                    <!-- 상대 기간 필터 (기본 표시) -->
                    <div class="relative-date-filter active" id="relative-filter">
                        <div class="period-buttons">
                            <div class="period-group">
                                <div class="period-group-title">일</div>
                                <div class="period-group-buttons">
                                    <button class="period-btn" data-period="1d">1일</button>
                                    <button class="period-btn" data-period="3d">3일</button>
                                    <button class="period-btn" data-period="5d">5일</button>
                                </div>
                            </div>
                            <div class="period-group">
                                <div class="period-group-title">주</div>
                                <div class="period-group-buttons">
                                    <button class="period-btn" data-period="1w">1주</button>
                                    <button class="period-btn" data-period="2w">2주</button>
                                    <button class="period-btn" data-period="3w">3주</button>
                                </div>
                            </div>
                            <div class="period-group">
                                <div class="period-group-title">월</div>
                                <div class="period-group-buttons">
                                    <button class="period-btn active" data-period="1m">1달</button>
                                    <button class="period-btn" data-period="3m">3달</button>
                                    <button class="period-btn" data-period="6m">6달</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 절대 기간 필터 (초기에는 숨김) -->
                    <div class="absolute-date-filter" id="absolute-filter">
                        <div class="date-inputs">
                            <div class="date-input-group">
                                <label for="start-date">시작일</label>
                                <input type="date" id="start-date" class="date-input">
                            </div>
                            <div class="date-input-group">
                                <label for="end-date">종료일</label>
                                <input type="date" id="end-date" class="date-input">
                            </div>
                            <button id="apply-date-filter" class="apply-btn">적용</button>
                        </div>
                    </div>
                </div>

                <div class="stat-cards">
                    <div class="card stat-summary">
                        <h3 class="section-title">팀 통계 요약</h3>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-value" id="summary-match-count">0</div>
                                <div class="summary-label">경기</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="summary-goals-for">0</div>
                                <div class="summary-label">득점</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="summary-goals-against">0</div>
                                <div class="summary-label">실점</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="summary-assist">0</div>
                                <div class="summary-label">어시스트</div>
                            </div>
                        </div>
                    </div>

                    <div class="card attendance-rate">
                        <h3 class="section-title">참석률</h3>
                        <div class="attendance-content">
                            <div class="attendance-overview">
                                <div class="attendance-stat">
                                    <div class="attendance-value" id="attendance-rate-value">0%</div>
                                    <div class="attendance-label">전체 참석률</div>
                                </div>
                            </div>
                            <div class="attendance-chart">
                                <div class="chart-bar">
                                    <div class="chart-fill" id="attendance-chart-fill"></div>
                                </div>
                                <div class="chart-labels">
                                    <span>0%</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card top-scorers">
                        <h3 class="section-title">득점 순위</h3>
                        <div class="rank-list" id="goal-rank-wrapper">
                        </div>
                    </div>

                    <div class="card top-assists">
                        <h3 class="section-title">어시스트 순위</h3>
                        <div class="rank-list" id="assist-rank-wrapper">
                        </div>
                    </div>

                    <div class="card player-list-card">
                        <h3 class="section-title">전체 선수 기록</h3>
                        <div class="player-table-container">
                            <table class="player-table">
                                <thead>
                                    <tr>
                                        <th class="sortable" data-sort="name">선수 <i class="fas fa-sort"></i></th>
                                        <th class="sortable" data-sort="number">등번호 <i class="fas fa-sort"></i></th>
                                        <th class="sortable" data-sort="games">경기 <i class="fas fa-sort"></i></th>
                                        <th class="sortable" data-sort="goals">득점 <i class="fas fa-sort"></i></th>
                                        <th class="sortable" data-sort="assists">어시스트 <i class="fas fa-sort"></i></th>
                                    </tr>
                                </thead>
                                <tbody id="player-record-wrapper">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 선수 탭 컨텐츠 -->
            <div id="players-content" class="content-section">
                <div class="player-filter">
                    <div class="search-box">
                        <input type="text" placeholder="선수 이름 검색" class="search-input">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="position-filter">
                        <button class="filter-btn active" data-filter="all">전체</button>
                        <button th:each="positionGroup : ${positionGroups}" th:data-filter="${positionGroup.group}"
                                class="filter-btn" th:text="${positionGroup.group}">
                        </button>

                        <th:block th:each="positionGroup : ${positionGroups}">
                            <input th:each="position : ${positionGroup.positions}" type="hidden"
                                   th:name="${'position-filter-' + positionGroup.group}"
                                   th:data-group="${positionGroup.group}" th:value="${position}"/>
                        </th:block>
                    </div>
                </div>

                <div class="player-grid" id="player-wrapper">
                </div>
            </div>
        </div>
    </div>

    <th:block th:replace="~{fragments/nav :: navFragment}"></th:block>

    <!-- 선수 상세 정보 모달 -->
    <div class="player-modal" id="player-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-player-name">선수 이름</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="player-profile">
                    <div class="player-profile-info">
                        <div class="profile-row">
                            <span class="info-label">등번호:</span>
                            <span id="modal-player-number" class="info-value">#10</span>
                        </div>
                        <div class="profile-row">
                            <span class="info-label">포지션:</span>
                            <span id="modal-player-position" class="info-value">FW</span>
                        </div>
                        <div class="profile-row">
                            <span class="info-label">생년월일:</span>
                            <span id="modal-player-birth" class="info-value">1995-05-15</span>
                        </div>
                        <div class="profile-row">
                            <span class="info-label">키:</span>
                            <span id="modal-player-height" class="info-value">180cm</span>
                        </div>
                        <div class="profile-row">
                            <span class="info-label">몸무게:</span>
                            <span id="modal-player-weight" class="info-value">75kg</span>
                        </div>
                    </div>
                </div>
                
                <div class="player-stats">
                    <h4>능력치</h4>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-name">스피드</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 85%;"></div>
                            </div>
                            <div class="stat-value">85</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">슈팅</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 90%;"></div>
                            </div>
                            <div class="stat-value">90</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">패스</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 80%;"></div>
                            </div>
                            <div class="stat-value">80</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">드리블</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 88%;"></div>
                            </div>
                            <div class="stat-value">88</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">수비</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 45%;"></div>
                            </div>
                            <div class="stat-value">45</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">체력</div>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 75%;"></div>
                            </div>
                            <div class="stat-value">75</div>
                        </div>
                    </div>
                    
                    <div class="foot-preference">
                        <h4>발 기술</h4>
                        <div class="foot-stats">
                            <div class="foot-item">
                                <span class="foot-label">왼발:</span>
                                <div class="star-rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                            </div>
                            <div class="foot-item">
                                <span class="foot-label">오른발:</span>
                                <div class="star-rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <template id="rank-item-template">
        <div class="rank-item">
            <div class="rank-position">1</div>
            <div class="player-info">
                <div class="player-details">
                    <div class="player-name">홍길동</div>
                </div>
            </div>
            <div class="stat-value">0골</div>
        </div>
    </template>

    <template id="player-record-template">
        <tr>
            <td>홍길동</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
        </tr>
    </template>

    <template id="player-card-template">
        <div class="player-card" data-player-id="1">
            <div class="player-basic-info">
                <h3 class="player-name">이골키퍼</h3>
                <div class="player-number">#1</div>
            </div>
        </div>
    </template>

    <template id="player-position-template">
        <div class="player-position">GK</div>
    </template>

    <script type="module" th:src="@{/js/teams/teams.js}" defer></script>
</body>
</html> 